{% extends "base.html" %}

{% block title %}
    Play
{% endblock %}

{% block content %}
    <div class="content p-3">
        <h1>Hexdle</h1>
        <div id="toolbar">
            <!-- Link to instructions modal -->
            <button type="button" data-bs-toggle="modal" data-bs-target="#instructions" class="clean-btn" aria-label="instructions-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-question-circle-fill" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247m2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"/>
                </svg>
            </button>
            <!-- Link to more info modal -->
            <button type="button" data-bs-toggle="modal" data-bs-target="#info" class="clean-btn" aria-label="info-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
                </svg>
            </button>
            <!-- Link to settings modal -->
            <button type="button" data-bs-toggle="modal" data-bs-target="#settings" class="clean-btn" aria-label="settings-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                </svg>
            </button>
            <!-- Start new game -->
            <button id="new-game" type="button" class="clean-btn" aria-label="new-game-button" data-bs-toggle="tooltip" data-bs-title="Start a new game">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
                </svg>
            </button>
        </div>
        <p>Guess the hexcode of the color below</p>
        <!-- Contain color to guess -->
        <div id="color-box"></div>
        <!-- Input fields -->
        <form id="input" action="/check" method="post" class="m-2">
            <!-- Previous attempts -->
            <div id="previous"></div>
            <!-- Input fields for user -->
            <div id="current" class="inputs m-0">
                <p class="inline fw-bolder align-middle mb-0">#</p>
                <input name="1" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3" autofocus>
                <input name="2" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3">
                <input name="3" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3">
                <input name="4" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3">
                <input name="5" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3">
                <input name="6" maxlength="1" pattern="[A-Fa-f0-9]" required autocomplete="off" class="align-middle fs-3">
            </div>
            <!-- Extra fields if playing in limited mode -->
            <div id="extra"></div>
            <!-- Check answer -->
            <button id="check" type="submit" class="align-middle normal-btn m-2">CHECK</button>
        </form>
        <!-- Keyboard -->
        <div id="keyboard">
            <div id="numbers" class="m-1">
                {% for n in "1234567890" %}
                    <button id="{{ n }}" class="key normal-btn" type="button" tabindex="-1">{{ n }}</button>
                {% endfor %}
            </div>
            <div id="letters" class="m-1">
                {% for letter in "ABCDEF" %}
                    <button id="{{ letter }}" class="key normal-btn" type="button" tabindex="-1">{{ letter }}</button>
                {% endfor %}
                <button id="backspace" class="key normal-btn" type="button" aria-label="backspace-button" tabindex="-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-backspace icon" viewBox="0 0 16 16">
                        <path d="M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z"/>
                        <path d="M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"/>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Instructions -->
        <div class="modal fade" id="instructions" tabindex="-1" aria-labelledby="instructions-label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="instructions-label">How To Play</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            Try to guess the hexcode of the color in the box. 
                            If you don't know what a hexcode is, it is basically a 6-digit representation of a color. 
                            Valid digits are from A-F and all numerical digits.
                            It would help a lot to understand how they work!
                        </p>
                        <p>
                            Enter your guess in the cells below, and press check to see how you do.
                            Cells highlighted in green indicate that the digit you guessed at that position is correct.
                            Cells highlighted in yellow indicate that the digit is in the hexcode, but not in the correct position.
                            Cells in gray are not in the hexcode.
                            You have unlimited attempts to guess the color.
                            Turn on limited guessing mode in settings for a challenge!
                        </p>
                        <p>
                            Good luck!
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Info -->
        <div class="modal fade" id="info" tabindex="-1" aria-labelledby="info-label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="info-label">More Information</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body d-flex flex-column align-items-center justify-items-center">
                        <p>
                            What are hexcodes? Hexcodes represent a color with three sets of two digit numbers using hexadecimal (base-16).
                        </p>
                        <p>
                            In base 16, the digits go 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, and F.
                        </p>
                        <p>
                            The first two digit numbers indicate how much red is in the color. 
                            The next indicate the amount of green, and the last indicate the amount of blue.
                        </p>
                        <p>
                            You should use this knowledge to help guess the color. 
                            You can also see the colors you previously guessed in the hash symbol next to your past guesses.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Settings -->
        <div class="modal fade" id="settings" tabindex="-1" aria-labelledby="settings-label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="settings-label">Settings</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body d-flex flex-column align-items-center justify-items-center">
                        <form id="settings-container">
                            <!-- Set game mode -->
                            <div class="form-check form-switch form-check-reverse">
                                <label class="form-check-label" for="switchGuessMode">Limited guesses</label>
                                <input class="form-check-input" type="checkbox" role="switch" id="switchGuessMode" name="limitedMode" {% if limited_mode %}checked{% endif %}>
                            </div>
                            <!-- Set UI color mode -->
                            <div class="form-check form-switch form-check-reverse">
                                <label class="form-check-label" for="switchDarkMode">Dark mode</label>
                                <input class="form-check-input" type="checkbox" role="switch" id="switchDarkMode" name="darkMode" {% if dark_mode %}checked{% endif %}>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Results -->
        <div class="modal fade" id="results" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="results-label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header justify-content-center">
                        <h1 class="modal-title fs-5" id="results-label"></h1>
                    </div>
                    <div class="modal-body"></div>
                    <div class="modal-footer justify-content-center">
                        <form action="/new" method="get">
                            <button type="submit" class="normal-btn">Play Again</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block embedded %}
    <script src="static/game.js"></script>
{% endblock %}